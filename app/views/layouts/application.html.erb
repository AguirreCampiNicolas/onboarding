<!DOCTYPE html>
<html>
  <head>
    <title>Onboarding</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application.tailwind", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "manifest", "data-turbo-track": "reload", type: "module" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", type: "module" %>
    <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
  </head>

  <body class="bg-planit-grey-4">
    <%= render 'layouts/flash_messages' %>

    <% if client_signed_in? %>
      <nav class="bg-white border-planit-grey-2 dark:bg-gray-900">
        <div class="max-w-screen-xl mx-auto p-4 flex justify-between items-center w-full">
          <div class="flex-shrink-0">
            <%= link_to root_path do %>
              <%= image_tag "Logo-primary", alt: "Logo", class: "w-24 µh-auto object-cover" %>
            <% end %>
          </div>

          <!-- Seccion del centro -->
          <div class="hidden md:flex flex-col items-center space-y-4 w-1/2" id="navbar-user">
            <ul class="flex flex-col font-medium p-4 md:p-0 mt-4 border border-planit-grey-2 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-planit-grey-2">
              <li>
                <%= link_to "Regalos", products_path(:type => "Regalos"), class: "bold-text-lg text-gradient #{"border-b-2 border-b-planit-light-blue" unless params[:type] != "Regalos"}" %>
              </li>
              <li>
                <%= link_to "Catering", products_path(:type => "Catering"), class: "bold-text-lg text-gradient  #{"border-b-2 border-b-planit-light-blue" unless params[:type] != "Catering"}" %>
              </li>
              <li>
                <%= link_to "Merchandising", products_path(:type => "Merchandising"), class: "bold-text-lg text-gradient  #{"border-b-2 border-b-planit-light-blue" unless params[:type] != "Merchandising"}" %>
              </li>
              <li>
                <%= link_to "Eventos", products_path(:type => "Eventos"), class: "bold-text-lg text-gradient  #{"border-b-2 border-b-planit-light-blue" unless params[:type] != "Eventos"}" %>
              </li>
            </ul>
            <!-- Search Bar -->
            <div class="w-full mt-2 relative" data-controller="dropdown">
              <%= form_with(url: products_path, method: :get, local: true, class: "w-full") do |f| %>
                <div class="flex justify-center items-center relative">
                  <%= text_field_tag :search, params[:search], placeholder: "Food Box | $1000 - $2000", class: "text-tiny-text-lg bg-planit-grey-4 border rounded-full w-full relative", data: { action: "focus->dropdown#toggle", target: "dropdown.input" } %>
                  <%= hidden_field_tag :type, params[:type] unless !params[:type].present? %>
                  <button type="submit" class="absolute right-0 mr-1">
                    <%= image_tag "icons/Lupa.svg", class: "w-8 h-auto" %>
                  </button>
                </div>
                <!-- Dropdown Filters -->
                <div class="absolute top-full mt-2 w-full bg-white shadow-lg rounded-lg hidden" data-target="dropdown.menu">
                  <div class="p-2">
                    <label class="block">
                      <input type="radio" name="search_filter" value="name" class="mr-2" <%= "checked" if params[:search_filter] == "name" || params[:search_filter].blank? %>> Nombre
                    </label>
                    <label class="block">
                      <input type="radio" name="search_filter" value="category" class="mr-2" <%= "checked" if params[:search_filter] == "category" %>> Categoría
                    </label>
                  </div>
                </div>
              <% end %>
            </div>
          </div>

          <!-- Dropdown menu -->
          <div class="flex items-center md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse">
            <div class="flex items-center space-x-3">
              <%= image_tag "Logo-primary", class: "w-8" %>
              <div>
                <p class="text-bold-text-lg"><%= current_client.name %></p>
                <span class="flex items-center text-small-text-lg text-planit-grey-2" aria-expanded="false" data-dropdown-toggle="user-dropdown" data-dropdown-placement="bottom"><%= current_client.name %>
                  <%= image_tag "icons/Drop-down.svg", class: "w-2 h-auto ml-1" %>
                </span>
              </div>
            </div>
            <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 dark:divide-gray-600" id="user-dropdown">
              <div class="px-4 py-3">
                <span class="block text-sm text-gray-900 dark:text-white"><%= current_client.email%></span>
                <span class="block text-sm  text-gray-500 truncate dark:text-gray-400"><%= current_client.email%></span>
              </div>
              <ul class="py-2" aria-labelledby="user-menu-button">
                <li>
                  <%= link_to "Perfil", client_path(current_client),:class => "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white"%>
                </li>
                <li>
                  <%= link_to 'Logout', destroy_client_session_path, 'data-turbo-method': :delete, :class => "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white"%>
                </li>
              </ul>
            </div>
            <button data-collapse-toggle="navbar-user" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-user" aria-expanded="false">
              <span class="sr-only">Open main menu</span>
              <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
              </svg>
            </button>
          </div>
        </div>
        <!-- Search Bar for small screens -->
        <div class="md:hidden p-4" data-controller="dropdown">
          <%= form_with(url: products_path, method: :get, local: true, class: "w-full") do |f| %>
            <div class="flex justify-center items-center relative">
              <%= text_field_tag :search, params[:search], placeholder: "Food Box | $1000 - $2000", class: "pl-12 text-tiny-text-lg bg-planit-grey-4 border rounded-full w-full relative", data: { action: "focus->dropdown#toggle", target: "dropdown.input" } %>
              <%= hidden_field_tag :type, params[:type] unless !params[:type].present? %>
              <%= image_tag "icons/Filtros.svg", class: "absolute right-0 mr-1 w-8 h-auto", data: { action: "click->dropdown#toggle", target: "dropdown.input" } %>
              <button type="submit" class="absolute left-0 ml-1">
                <%= image_tag "icons/Lupa.svg", class: "w-8 h-auto" %>
              </button>
            </div>
            <!-- Dropdown Filters -->
            <div class="mt-2 w-full bg-white shadow-lg rounded-lg hidden z-50" data-target="dropdown.menu">
              <div class="p-2">
                <label class="block">
                  <input type="radio" name="search_filter" value="name" class="mr-2" <%= "checked" if params[:search_filter] == "name" || params[:search_filter].blank? %>> Nombre
                </label>
                <label class="block">
                  <input type="radio" name="search_filter" value="category" class="mr-2" <%= "checked" if params[:search_filter] == "category" %>> Categoría
                </label>
              </div>
            </div>
          <% end %>
        </div>
      </nav>
    <% end %>

    <%= yield %>

    <%= render 'shared/mobile_footer' %>
  </body>
</html>
